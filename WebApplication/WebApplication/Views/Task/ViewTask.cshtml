@model WebApplication.Models.ViewTaskModel

@{
    ViewBag.Title = "View Task";
}

<h2>View Task</h2>

<div>
	<hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.Name)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Name)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Complexity)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Complexity)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Category)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Category)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Condition)
        </dt>

        <dd>
         @Html.Raw(Model.Condition)
         @if (ViewBag.IsSolved==false) { 
        <input type="text" placeholder="Your Answer" id="answer" >
        <div id="answerZone"></div>
        <button class="btn-default" id="AnswerSubmit">Ответить</button>
         }
         else
         {
             <div>Ты это решал уже мудак</div>
         }

    </dl>
</div>

<script>
    $(function () {
        $('#AnswerSubmit').click(function () {
            $.ajax({
                type:"Post",
                url: '@Url.Action("CheckAnswer","Answer")',
                data: {
                    taskId : '@Model.Id',
                    answer : $('#answer').val()
                },
                success: function (data) {
                    if (data == 'True')
                    {
                        console.log(1);
                        var element = document.createElement("span");
                        element.className = "glyphicon glyphicon-ok"
                        $('#answerZone').html(element);
                        $('#answer').hide();
                        $('#AnswerSubmit').hide();

                    }
                    else {
                        var element = document.createElement("span");
                        element.className = "glyphicon glyphicon-remove"
                        $('#answerZone').html(element);
                    }
                }
            })
        })
    });
</script>